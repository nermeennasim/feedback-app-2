{"ast":null,"code":"import _slicedToArray from\"C:/Users/nerme/Documents/feedback-app-2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectDestructuringEmpty from\"C:/Users/nerme/Documents/feedback-app-2/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import React,{useContext}from\"react\";import Card from\"./shared/Card\";import{useState,useEffect}from\"react\";import Button from\"./shared/Button\";import RatingSelect from\"./RatingSelect\";import FeedbackContext from\"../context/FeedbackContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(_ref){_objectDestructuringEmpty(_ref);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),btnDisabled=_useState4[0],setBtnDisabled=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(10),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;//use effect takes two arguments, one function,\n// other if needs to load evertime or it needs to load just one time\nuseEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setRating(feedbackEdit.item.rating);setText(feedbackEdit.item.text);}},[feedbackEdit]);//handle text change event\nvar handleTextChange=function handleTextChange(e){//check if text is zero\nif(text===\"\"){setBtnDisabled(true);setMessage(null);}else if(text!==\"\"&&text.trim().length<=10){setMessage(\"Text must be atleast 10 characters\");setBtnDisabled(true);}else{setMessage(null);setBtnDisabled(false);}setText(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedbackItem={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedbackItem);feedbackEdit.edit=false;}else{addFeedback(newFeedbackItem);}//clear text box\nsetText(\"\");}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",value:text,placeholder:\"Write a review\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisabled,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"names":["React","useContext","Card","useState","useEffect","Button","RatingSelect","FeedbackContext","jsx","_jsx","jsxs","_jsxs","FeedbackForm","_ref","_objectDestructuringEmpty","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","btnDisabled","setBtnDisabled","_useState5","_useState6","message","setMessage","_useState7","_useState8","rating","setRating","_useContext","addFeedback","feedbackEdit","updateFeedback","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","newFeedbackItem","id","children","onSubmit","select","className","onChange","type","placeholder","isDisabled"],"sources":["C:/Users/nerme/Documents/feedback-app-2/src/components/FeedbackForm.jsx"],"sourcesContent":["import React, { useContext } from \"react\";\r\nimport Card from \"./shared/Card\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Button from \"./shared/Button\";\r\nimport RatingSelect from \"./RatingSelect\";\r\nimport FeedbackContext from \"../context/FeedbackContext\";\r\n\r\nfunction FeedbackForm({}) {\r\n\tconst [text, setText] = useState(\"\");\r\n\tconst [btnDisabled, setBtnDisabled] = useState(true);\r\n\tconst [message, setMessage] = useState(\"\");\r\n\tconst [rating, setRating] = useState(10);\r\n\tconst { addFeedback, feedbackEdit, updateFeedback } =\r\n\t\tuseContext(FeedbackContext);\r\n\r\n\t//use effect takes two arguments, one function,\r\n\t// other if needs to load evertime or it needs to load just one time\r\n\tuseEffect(() => {\r\n\t\tif (feedbackEdit.edit === true) {\r\n\t\t\tsetBtnDisabled(false);\r\n\t\t\tsetRating(feedbackEdit.item.rating);\r\n\t\t\tsetText(feedbackEdit.item.text);\r\n\t\t}\r\n\t}, [feedbackEdit]);\r\n\t//handle text change event\r\n\tconst handleTextChange = (e) => {\r\n\t\t//check if text is zero\r\n\t\tif (text === \"\") {\r\n\t\t\tsetBtnDisabled(true);\r\n\t\t\tsetMessage(null);\r\n\t\t} else if (text !== \"\" && text.trim().length <= 10) {\r\n\t\t\tsetMessage(\"Text must be atleast 10 characters\");\r\n\t\t\tsetBtnDisabled(true);\r\n\t\t} else {\r\n\t\t\tsetMessage(null);\r\n\t\t\tsetBtnDisabled(false);\r\n\t\t}\r\n\r\n\t\tsetText(e.target.value);\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (text.trim().length > 10) {\r\n\t\t\tconst newFeedbackItem = {\r\n\t\t\t\ttext,\r\n\t\t\t\trating,\r\n\t\t\t};\r\n\r\n\t\t\tif (feedbackEdit.edit === true) {\r\n\t\t\t\tupdateFeedback(feedbackEdit.item.id, newFeedbackItem);\r\n\t\t\t\tfeedbackEdit.edit = false;\r\n\t\t\t} else {\r\n\t\t\t\taddFeedback(newFeedbackItem);\r\n\t\t\t}\r\n\r\n\t\t\t//clear text box\r\n\t\t\tsetText(\"\");\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Card>\r\n\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t<h2>How would you rate your service with us?</h2>\r\n\t\t\t\t<RatingSelect select={(rating) => setRating(rating)} />\r\n\r\n\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tonChange={handleTextChange}\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tvalue={text}\r\n\t\t\t\t\t\tplaceholder=\"Write a review\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button type=\"submit\" isDisabled={btnDisabled}>\r\n\t\t\t\t\t\tSend\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{message && <div className=\"message\">{message}</div>}\r\n\t\t\t</form>\r\n\t\t</Card>\r\n\t);\r\n}\r\n\r\nexport default FeedbackForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}